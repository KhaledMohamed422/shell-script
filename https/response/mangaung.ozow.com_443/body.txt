<HTML>
<HEAD>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <TITLE>
        Munucipality Payments
    </TITLE>
    <link href="https://fonts.googleapis.com/css?family=Jockey+One" rel="stylesheet">
    <link href="/Content/css?v=MDbdFKJHBa_ctS5x4He1bMV0_RjRq8jpcIAvPpKiN6U1" rel="stylesheet"/>

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    <STYLE>
        input {
            outline: none !important;
            border: none;
            background-color: #FFF;
            color: #000;
            padding: 5px;
            text-align: center;
            font-size: large;
            font-weight: 900;
        }

            input::placeholder {
                color: #D2D3D5;
            }

        button {
            background-color: rgb(255,77,0);
            border: 0px;
            font-weight: bold;
            font-size: x-large;
            margin-top: 35px;
            color: #FFF;
            outline: none !important;
            border: none;
        }

        .step {
            color: #FFF;
            font-size: x-large;
            text-shadow: none;
            background-color: rgb(187, 255, 0);
            text-align: center;
        }

        #steps {
            margin-top: -30px;
        }

        #logoContainer {
            padding-top: 20px;
        }

            #logoContainer img {
                width: 180px;
            }

        #enterStep1, #enterStep2 {
            color: #FFF;
            font-size: large;
            text-shadow: none;
        }

        span {
            background-color: #FFF;
            color: #000;
            font-size: large;
            text-shadow: none;
            padding: 8px;
        }
    </STYLE>
</HEAD>
<BODY style="text-shadow: 0px 1px 4px #000; font-size:small;font-family: 'Century Gothic';color: rgb(187, 255, 0);font-weight:bold; background-image:url('/img/Background1.jpg');background-repeat:no-repeat;background-size:100% 120%;background-position:center bottom;padding-top:0px;">
    <DIV class="container">
        <DIV class="row">
            <DIV class="col-xs-12 col-sm-6 col-sm-offset-3">
                <DIV class="row">
                    <DIV id="logoContainer" style="text-align:center;">
                        <IMG src="/img/MangaungLogo.png" />
                    </DIV>
                </DIV>
                <DIV class="row" id="steps" style="display:none;">
                    <DIV id="step1Container" class="col-xs-4" style="padding:5px;">
                        <DIV id="step1" class="step">
                            STEP 1
                        </DIV>
                    </DIV>
                    <DIV id="step2Container" class="col-xs-4" style="padding:5px;">
                        <DIV id="step2" class="step">
                            STEP 2
                        </DIV>
                    </DIV>
                    <DIV id="step3Container" class="col-xs-4" style="padding:5px;">
                        <DIV id="step3" class="step">
                            STEP 3
                        </DIV>
                    </DIV>
                </DIV>
                <DIV class="row">
                    <DIV id="instructionContainer" style="padding-top: 50px;">
                        <DIV id="instruction" style="text-align:center;height:100px;">
                            <p id="error" style="display:none;color:red;"></p>
                            <DIV id="loadingDiv" style="display:none;" class="row">
                                <DIV class="col-xs-12 col-sm-6 col-sm-offset-3">
                                    <DIV class="row">
                                        <div style="text-align:center;">
                                            <img src="/img/loading.gif" />
                                        </div>
                                    </DIV>
                                </DIV>
                            </DIV>
                            <DIV id="welcome">
                                <p>Welcome to the Manguang</p>
                                <p>Munucipality payments interface</p>
                                <p>4 Steps from now,</p>
                                <p>you'll be done!!</p>
                                <p><BUTTON id="start">Pay Now</BUTTON></p>
                            </DIV>
                            <DIV id="enterStep1" style="display:none;">
                                <p>Enter your details:<p>
                                <p><INPUT id="accountNumber" autocomplete="off" value="" placeholder="Account Number" /></p>
                                <p><INPUT id="idNumber" autocomplete="off" value="" placeholder="Identity Number" /></p>
                                <p><INPUT id="mobileNumber" autocomplete="off" value="" placeholder="Mobile Number" /></p>
                                <p><BUTTON id="details">Check Details</BUTTON><p>
                            </DIV>
                            <DIV id="enterStep2" style="display:none;">
                                <p id="accountHolderName"><p>
                                <p id="accountHolderAddress"><p>
                                <p>Please enter payment amount:<p>
                                <p><span>R<INPUT id="amount" autocomplete="off" value="" placeholder="Amount" /></span></p>
                                <p><BUTTON id="pay">Confirm</BUTTON><p>
                            </DIV>
                            <DIV id="enterStep3" style="display:none;margin-top: 14px;border-radius:10px;overflow:hidden;box-shadow:0px 0px 10px #000;">
                                <IFRAME id="paymentFrame" src="" scrolling="yes" style="border:none;width:100%; display:none;"></IFRAME>
                            </DIV>
                            <DIV id="divSuccess" style="display:none">
                                <p style="font-size:x-large;color: rgb(255,77,0);text-shadow:none;">Payment Successful</p>
                                <img style="width:130px;" src="/img/GreenTick.png" />
                                <p style="font-size:x-large;">Thank You</p>
                                <p style="font-size:large;">for paying your Municipal</p>
                                <p style="font-size:large;">Bill with Mangaung</p>
                                <p><BUTTON id="payAnother">Pay Another</BUTTON><p>
                            </DIV>
                            <DIV id="divCancelled" style="display:none">
                                <p style="font-size:x-large;color: rgb(255,77,0);text-shadow:none;">Payment Failed</p>
                                <img style="width:130px;" src="https://demo.i-pay.co.za/images/cancelled.png" />
                                <p><BUTTON id="retry">Retry</BUTTON><p>
                            </DIV>
							<p style="font-size:2vh;">
                        Click on the following link to access our <a href="https://ozow.com/privacy-policy/" target="_blank">Privacy Policy</a>. By proceeding with this payment,
                        you confirm that you have read our Privacy Policy and that you agree with the terms set out in such
                        Privacy Policy
                    </p>

                        </DIV>
                    </DIV>
                </DIV>
            </DIV>
        </DIV>
    </DIV>
</BODY>

<script src="/bundles/jquery?v=FVs3ACwOLIVInrAl5sdzR2jrCDmVOWFbZMY6g6Q0ulE1"></script>

<script src="/bundles/bootstrap?v=2Fz3B0iizV2NnnamQFrx-NbYJNTFeBJ2GM05SilbtQU1"></script>


<SCRIPT>

    function welcome() {
        $('#welcome').show();
        $('#steps').hide();
        $('#step1').css('background-color', '#000');
    }

    function step1() {
        $('#welcome').hide();
        $('#steps').show();
        $('#enterStep1').show();
        $('#instructionContainer').animate({
            'paddingTop': '10px'
        }, 500);
        $('#steps').animate({
            'paddingTop': '100px'
        }, 500);
    }

    function step2() {

        $('#error').css('display', 'none');

        if ($('#accountNumber').val() == undefined || $('#accountNumber').val().trim() == '') {
            $('#error').html('Account Number Must Have A Value');
            $('#error').css('display', 'block');
            return;
        }

        if ($('#idNumber').val() == undefined || $('#idNumber').val().trim() == '') {
            $('#error').html('ID Number Must Have A Value');
            $('#error').css('display', 'block');
            return;
        }

        if ($('#mobileNumber').val() == undefined || $('#mobileNumber').val().trim() == '') {
            $('#error').html('Mobile Number Must Have A Value');
            $('#error').css('display', 'block');
            return;
        }

        $('#enterStep1').hide();
        //$('#loadingDiv').css('display', 'block');

        $.ajax({
            type: "GET",
            url: "/Home/GetAccount?AccountNumber=" + $('#accountNumber').val() + "&IdentityNumber=" + $('#idNumber').val() + "&MobileNumber=" + $('#mobileNumber').val(),
            dataType: "JSON",
            cache: true,
            success: function (data) {
                if (data.Error) {
                    $('#enterStep1').show();
                   // $('#loadingDiv').css('display', 'none');
                    $('#error').html(data.Error.Name);
                    $('#error').css('display', 'block');
                    return;
                }
                $('#accountHolderName').html(data.Account.Name);
                $('#accountHolderAddress').html(data.Account.Address);

                $('#enterStep2').show();
                $('#step1').css('background-color', 'rgb(187, 255, 0)');
                $('#step2').css('background-color', '#000');
            },
            error: function (xhr, status, error) {
                console.log(error);
            }
        });
    }

    function step3() {
        $('#error').css('display', 'none');

        if ($('#amount').val() == undefined || $('#amount').val().trim() == '') {
            $('#error').html('Amount Must Have A Value');
            $('#error').css('display', 'block');
            return;
        }

        if (!$.isNumeric($('#amount').val())) {
            $('#error').html('Amount Must Be A Decimal Value');
            $('#error').css('display', 'block');
            return;
        }

        if ($('#amount').val() < 0.01) {
            $('#error').html('Amount Must Be Greater Than 0');
            $('#error').css('display', 'block');
            return;
        }

        $.ajax({
            type: "GET",
            url: "/Home/GetPaymentPage?AccountNumber=" + $('#accountNumber').val() + "&AccountName=" + $('#accountHolderName').text() + "&Amount=" + $('#amount').val(),
            dataType: "JSON",
            cache: false,
            success: function (data) {
                console.log(data);
                $('#paymentFrame').attr('src', "/Home/Redirect?paymentUrl="+data.URL);
                setTimeout(function () { pollResonse(data.Reference); }, 30000);
                $('#logoContainer').slideUp("fast", function () {
                    // Animation complete.
                    $('body').css('background-image', 'url(/img/Background2.jpg)');
                    $('body').css('background-size', '100% 97%');
                    $("#paymentFrame").css('height', $(window).height() - $("#paymentFrame").offset().top - 150 + 'px');
                    $("#paymentFrame").css('display', 'block');

                    $('#enterStep2').hide();
                    $('#enterStep3').show();
                    $('#step2').css('background-color', 'rgb(187, 255, 0)');
                    $('#step3').css('background-color', '#000');
                });
            },
            error: function (xhr, status, error) { }
        });
    }

    function pollResonse(ref) {

        $.ajax({
            type: "GET",
            url: "/Home/CheckPayment?reference=" + ref,
            dataType: "JSON",
            cache: false,
            success: function (data) {
                if (data == 0) {
                    setTimeout(function () { pollResonse(ref); }, 5000);
                }
                else {
                    $('#enterStep3').hide();
                    $('#step3').css('background-color', 'rgb(187, 255, 0)');

                    $('body').css('background-image', 'url(/img/Background3.jpg)');
                    $('body').css('background-size', '100% 100%');

                    $('#logoContainer').slideDown("fast", function () {
                        $('#steps').css('display', 'none');
                    });
                    if (data == 1) {
                        $('#divSuccess').css('display', 'block');
                    }
                    else {
                        $('#divCancelled').css('display', 'block');
                    }

                    setTimeout(function () { location.reload(); }, 30000);
                }
            },
            error: function (xhr, status, error) { }
        });
    }

    $(document).ready(function () {

        welcome();



        $('#start').click(function () {
            step1();
        });

        $('#details').click(function () {
            step2();
        });

        $('#pay').click(function () {
            step3();
        });


        $('#block2').click(function () {
            $('#block1').animate({
                width: "10px",
                height: "10px",
                'marginLeft': "-=30px"
            }, 500);
        });

        $('#retry').click(function () {
            location.reload();
        });

        $('#payAnother').click(function () {
            location.reload();
        });
    });
</SCRIPT>
</HTML>
0




https://mangaung.ozow.com:443